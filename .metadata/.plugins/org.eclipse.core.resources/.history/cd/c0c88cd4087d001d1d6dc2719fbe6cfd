package ls.lesm.restcontroller;

@RestController
@CrossOrigin("*")
public class AbscondEmpController {



    @Autowired
    MasterEmployeeDetailsRepository detailsRepository;


    @Autowired
     AbscondEmpServiceImpl abscondEmpServiceImpl;

 

    @Autowired
    ReleaseEmpDetailsRepository releaseEmpDetailsRepository;





    //1.select all designations
    @GetMapping("/get-all-designations")
    public ResponseEntity<List<Designations>> getAllDesgList() {
        List<Designations> Designations = abscondEmpServiceImpl.GetAllDesignation();

 

        List<Designations> filter = new ArrayList<Designations>();

 

        Pattern p = Pattern.compile("super admin", Pattern.CASE_INSENSITIVE);

        for (Designations de : Designations) {

 

            Matcher m = p.matcher(de.getDesgNames());


 

            if (m.matches()) {
                continue;

 

            }
            filter.add(de);

 

        }

 

        return new ResponseEntity<List<Designations>>(filter, HttpStatus.OK);
    }



        //2.select on emp by desg
    @GetMapping("/getByDesignationId/{des_id}")
    public ResponseEntity<List<MasterEmployeeDetails>> getEmployeesByDessignation(@PathVariable int des_id) {

 

        List<MasterEmployeeDetails> employeeDetails =  abscondEmpServiceImpl.GetEmp(des_id);

 

        return new ResponseEntity<List<MasterEmployeeDetails>>(employeeDetails, HttpStatus.OK);

 

    }



    //3. abscond emp
    @GetMapping("/AbscondEmp/{lancesoftId}")
    public synchronized ResponseEntity<?> abscondempDetails(@PathVariable String lancesoftId,Principal principal) {
         abscondEmpServiceImpl.AbscondEmp(lancesoftId, principal);
        return new ResponseEntity<>("Absconded Successfully", HttpStatus.CREATED);

 

    }




    //4.terminate emp
    @GetMapping("/TerminateEmp/{lancesoftId}")
    public synchronized ResponseEntity<?> terminateEmpDetails(@PathVariable String lancesoftId,Principal principal) {
         abscondEmpServiceImpl.terminateEmp(lancesoftId, principal);
        return new ResponseEntity<>(" Terminated Successfully", HttpStatus.CREATED);

 

    }



    @GetMapping("/ReleaseEmp/{lancesoftId}")
    public synchronized ResponseEntity<?> releaseEmpDetails(@PathVariable String lancesoftId,Principal principal) {
         abscondEmpServiceImpl.releaseEmp(lancesoftId, principal);
        return new ResponseEntity<>(" Terminated Successfully", HttpStatus.CREATED);

 

    }





